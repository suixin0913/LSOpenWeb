(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{140:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return r})),n.d(t,"default",(function(){return s}));var b=n(3),l=n(8),a=(n(0),n(171)),c={id:"lisa_api",title:"LISA_API \u63a5\u53e3\u624b\u518c",slug:"/lisa_api"},p={unversionedId:"CSK_online_guides/xr872_lisa/lisa_api",id:"CSK_online_guides/xr872_lisa/lisa_api",isDocsHomePage:!1,title:"LISA_API \u63a5\u53e3\u624b\u518c",description:"Drivers",source:"@site/docs/CSK_online_guides/xr872_lisa/lisa_api.md",slug:"/lisa_api",permalink:"/lisa_api",version:"current"},r=[{value:"Drivers",id:"drivers",children:[{value:"1 .FLASH \u6a21\u5757",id:"1-flash-\u6a21\u5757",children:[]},{value:"2. RTC \u6a21\u5757",id:"2-rtc-\u6a21\u5757",children:[]},{value:"3. WiFi \u6a21\u5757",id:"3-wifi-\u6a21\u5757",children:[]}]},{value:"OS",id:"os",children:[{value:"1. Thread",id:"1-thread",children:[]},{value:"2. Queue",id:"2-queue",children:[]},{value:"3. Mutex",id:"3-mutex",children:[]},{value:"4 .Semaphore",id:"4-semaphore",children:[]},{value:"5. Timer",id:"5-timer",children:[]},{value:"6 .Time",id:"6-time",children:[]},{value:"7.Memory",id:"7memory",children:[]}]},{value:"Component",id:"component",children:[{value:"1. \u64ad\u653e\u5668",id:"1-\u64ad\u653e\u5668",children:[]}]},{value:"Log",id:"log",children:[{value:"1. \u65e5\u5fd7",id:"1-\u65e5\u5fd7",children:[]}]},{value:"Modules",id:"modules",children:[{value:"1 .button\u68c0\u6d4b",id:"1-button\u68c0\u6d4b",children:[]},{value:"2. led\u663e\u793a",id:"2-led\u663e\u793a",children:[]},{value:"3 \u6301\u4e45\u5316",id:"3-\u6301\u4e45\u5316",children:[]},{value:"4. \u7535\u6e90\u6a21\u5757",id:"4-\u7535\u6e90\u6a21\u5757",children:[]},{value:"5 \u5f02\u5e38\u8ddf\u8e2a",id:"5-\u5f02\u5e38\u8ddf\u8e2a",children:[]},{value:"6 Http\u6a21\u5757",id:"6-http\u6a21\u5757",children:[]},{value:"7. Websocket",id:"7-websocket",children:[]}]}],_={toc:r};function s(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(a.b)("wrapper",Object(b.a)({},_,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"drivers"},"Drivers"),Object(a.b)("p",null,"\u5c01\u88c5 LISA \u8bed\u97f3\u7cfb\u7edf\u9700\u8981\u7684\u57fa\u672c\u9a71\u52a8\u529f\u80fd\uff0c\u8f93\u51fa\u7edf\u4e00API"),Object(a.b)("h3",{id:"1-flash-\u6a21\u5757"},"1 .FLASH \u6a21\u5757"),Object(a.b)("h4",{id:"11-\u7b80\u4ecb"},"1.1 \u7b80\u4ecb"),Object(a.b)("p",null,"FLASH \u6a21\u5757\u7528\u4e8e\u652f\u6301 LISA \u7684\u6301\u4e45\u5316\u529f\u80fd\u6a21\u5757\uff0c\u4ee5\u53ca\u5bf9\u56fa\u5316\u5728 FLASH \u4e2d\u7684\u97f3\u9891\u6587\u4ef6\u7684\u8bfb\u53d6\u64cd\u4f5c\u3002"),Object(a.b)("h4",{id:"12-\u63a5\u53e3\u8bf4\u660e"},"1.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_flash_write(uint32_t addr, uint8_t *buf, uint32_t size)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b    addr\t\t\u5f85\u5199\u5165\u7684\u8d77\u59cb\u5730\u5740"),Object(a.b)("p",null,"\u200b\tbuf\t      \u5f85\u5199\u5165\u7684\u6570\u636ebuf\u6307\u9488"),Object(a.b)("p",null,"\u200b\tsize\t\t \u5f85\u5199\u5165\u7684\u6570\u636e\u957f\u5ea6"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\tFLASH \u5199\u5165\u64cd\u4f5c\uff0c\u5199\u4e4b\u524d\u9700\u8981\u5148\u64e6\u9664\u3002"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_flash_read(uint32_t addr, uint8_t *buf, uint32_t size)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b    addr\t\t\u5f85\u8bfb\u53d6\u7684\u8d77\u59cb\u5730\u5740"),Object(a.b)("p",null,"\u200b\tbuf\t      \u5f85\u8bfb\u53d6\u7684\u6570\u636ebuf\u6307\u9488"),Object(a.b)("p",null,"\u200b\tsize\t\t \u5f85\u8bfb\u53d6\u7684\u6570\u636e\u957f\u5ea6"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\tFLASH \u8bfb\u53d6\u64cd\u4f5c"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_flash_erase(uint32_t addr, uint32_t size)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b    addr\t\t\u5f85\u64e6\u9664\u7684\u8d77\u59cb\u5730\u5740"),Object(a.b)("p",null,"\u200b\tsize\t\t \u5f85\u64e6\u9664\u7684\u6570\u636e\u957f\u5ea6"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\tFLASH \u64e6\u9664\uff0c\u6700\u5c0f\u5355\u4f4d\u662f4K"),Object(a.b)("h4",{id:"13-\u4f7f\u7528\u793a\u4f8b"},"1.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'#define TAG "lisa_flash"\n\nuint8_t buf[512];\n\nvoid\nlisa_flash(int argc, char *argv[])\n{\n    uint32_t address, len;\n    void *data;\n    if (argc < 4) {\n        LISA_LOGE(TAG, "usage: %s write/read/erase addr len\\r\\n", argv[0]);\n        return;\n    }\n    address = atoi(argv[2]);\n    len = atoi(argv[3]);\n    if (len > sizeof(buf)) {\n        len = sizeof(buf);\n    }\n\n    LISA_LOGE(TAG, "address 0x%x  len:%d\\r\\n", address, len);\n\n    if (strcmp(argv[1], "write") == 0) {\n        for (uint8_t i = 0; i < len; i++) {\n            buf[i] = i;\n        }\n        lisa_flash_write(address, buf, len);\n    } else if (strcmp(argv[1], "read") == 0) {\n        for (uint8_t i = 0; i < len; i++) {\n            buf[i] = 0;\n        }\n        lisa_flash_read(address, buf, len);\n        for (uint8_t i = 0; i < len; i++) {\n            LISA_LOGE(TAG, "rec:0x%x\\r\\n", buf[i]);\n        }\n    } else if (strcmp(argv[1], "erase") == 0) {\n        lisa_flash_erase(address, 4096);\n    }\n}\n')),Object(a.b)("h3",{id:"2-rtc-\u6a21\u5757"},"2. RTC \u6a21\u5757"),Object(a.b)("h4",{id:"21-\u7b80\u4ecb"},"2.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u7528\u4e8e\u548c\u4e91\u7aef\u540c\u6b65\u65f6\u95f4"),Object(a.b)("h4",{id:"22-\u63a5\u53e3\u8bf4\u660e"},"2.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_rtc_set(lisa_time_t *time)\n")),Object(a.b)("p",null,"\u200b\t",Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\t\ttime\t\t             \u8bbe\u7f6e\u65f6\u95f4\u7684\u6570\u636e\u6307\u9488"),Object(a.b)("p",null,"\u200b\t",Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,"\u200b\t",Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\t\u8bbe\u7f6e\u65f6\u95f4"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_rtc_get(lisa_time_t *time)\n")),Object(a.b)("p",null,"\u200b\t",Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\t\ttime\t\t             \u83b7\u53d6\u65f6\u95f4\u7684\u6570\u636e\u6307\u9488"),Object(a.b)("p",null,"\u200b\t",Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,"\u200b\t",Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\t\u83b7\u53d6\u65f6\u95f4"),Object(a.b)("h4",{id:"23-\u4f7f\u7528\u793a\u4f8b"},"2.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'#define TAG "lisa_rtc"\n\nvoid\nrtc_test(int argc, char *argv[])\n{\n    lisa_time_t time;\n    uint8_t set = 0;\n\n    if (argc < 2) {\n        LISA_LOGE(TAG, "usage: %s set|get\\r\\n", argv[0]);\n        return;\n    }\n\n    lisa_rtc_get(&time);\n    if (\'s\' == argv[1][0]) {\n        set = 1;\n    } else {\n        set = 0;\n    }\n\n    if (set) {\n        time.year = 2013;\n        time.month = 11;\n        time.day = 12;\n        time.hour = 13;\n        time.minute = 14;\n        time.second = 15;\n        lisa_rtc_set(&time);\n    } else {\n        lisa_rtc_get(&time);\n    }\n}\n')),Object(a.b)("h3",{id:"3-wifi-\u6a21\u5757"},"3. WiFi \u6a21\u5757"),Object(a.b)("h4",{id:"31-\u7b80\u4ecb"},"3.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u63d0\u4f9b API \u5b9e\u73b0 WiFi \u7684 AP \u6a21\u5f0f\u548c STA \u6a21\u5f0f\u7684\u4f7f\u80fd\u548c\u9664\u80fd\uff0c\u5b9e\u73b0 WiFi \u53c2\u6570\u7684\u83b7\u53d6\uff0c\u5e76\u53ef\u6839\u636e\u56de\u8c03\u51fd\u6570\u8fd4\u56de WiFi \u7684\u4e8b\u4ef6\u4e2d\u65ad\u3002"),Object(a.b)("h4",{id:"32-\u63a5\u53e3\u8bf4\u660e"},"3.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_wifi_init(void);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\tnone"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u901a\u8fc7\u8be5\u51fd\u6570\u4e0a\u7535 WiFi \u7684\u786c\u4ef6\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_wifi_connect(lisa_wifi_connect_t *connect);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"connect     \u5199\u5165\u5f85\u8fde\u63a5\u7684wifi\u4fe1\u606f\uff0c\u53c2\u6570\u5185\u5bb9\u53c2\u52a0\u7ed3\u6784\u4f53lisa_wifi_connect_t\u5b9a\u4e49"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u8be5\u51fd\u6570\u542f\u52a8 WiFi \u7684 STA \u6a21\u5f0f\uff0c\u5e76\u8fde\u63a5\u5230\u6307\u5b9a\u7684 WiFi \u70ed\u70b9\u3002\uff08\u4ec5\u5728\u5f53\u524d WiFi \u6a21\u5f0f\u4e3a\u7a7a\u65f6\u751f\u6548\uff09"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_wifi_disconnect(void);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"  none"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u8be5\u51fd\u6570\u65ad\u5f00 WiFi \u8fde\u63a5\uff0cAP \u6a21\u5f0f\u548c STA \u6a21\u5f0f\u5747\u751f\u6548\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_wifi_start_ap(lisa_wifi_ap_t *ap);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"ap     \u9700\u8981\u5f00\u542f\u7684\u70ed\u70b9\u4fe1\u606f\uff0c\u53c2\u8003\u7ed3\u6784\u4f53lisa_wifi_ap_t\u5b9a\u4e49\u8bf4\u660e"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u8be5\u51fd\u6570\u542f\u52a8 WiFi \u7684 AP \u6a21\u5f0f\uff0c\u5e76\u521b\u5efa\u6307\u5b9a\u7684\u70ed\u70b9\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_wifi_stop_ap(void);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"  none"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u8be5\u51fd\u6570\u5173\u95edwifi\u7684ap\u6a21\u5f0f\u3002"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"int lisa_wifi_set_mode(lisa_wlan_mode_t mode)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"mode    \u5f85\u8bbe\u7f6e\u7684wifi\u5de5\u4f5c\u6a21\u5f0f\uff0c\u679a\u4e3e\u7c7b\u578b\uff0c\u53c2\u8003lisa_wlan_mode_t\u5b9a\u4e49"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u8fd4\u56de\u5f53\u524d\u8bbe\u7f6e\u7684wifi\u5de5\u4f5c\u6a21\u5f0f"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u7528\u4e8e\u8bbe\u7f6ewifi\u7684\u5de5\u4f5c\u6a21\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"int lisa_wifi_get_mode(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"none"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u8fd4\u56de\u5f53\u524d\u8bbe\u7f6e\u7684wifi\u5de5\u4f5c\u6a21\u5f0f"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u7528\u4e8e\u83b7\u53d6\u5f53\u524dwifi\u5de5\u4f5c\u6a21\u5f0f"),Object(a.b)("h4",{id:""}),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u6682\u672a\u5b9e\u73b0\u7684\u9884\u7559\u63a5\u53e3")),Object(a.b)("p",null,"\u200b\t\u5f00\u59cb\u641c\u7d22\u5468\u56f4\u73af\u5883\u7684 WiFi \u4fe1\u53f7"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_wifi_start_scan(lisa_wifi_scan_t *scan);\n")),Object(a.b)("p",null,"\u200b\t\u505c\u6b62\u641c\u7d22\u5468\u56f4\u73af\u5883\u7684 WiFi \u4fe1\u53f7"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_wifi_stop_scan(void);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u7ed3\u6784\u4f53\u5b9a\u4e49")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"typedef struct lisa_wifi_connect_t\n")),Object(a.b)("p",null,"wifi\u7684ssid,\u5bc6\u7801\u548c\u8fde\u63a5\u4e8b\u4ef6\u56de\u8c03"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u6210\u5458")),Object(a.b)("p",null,"char *ssid;\t\t\t\t\t// \u8fde\u5165\u7684ssid"),Object(a.b)("p",null,"char *password;\t\t\t\t// \u8fde\u5165\u7684\u5bc6\u7801\uff0c\u65e0\u5bc6\u7801\u7f6eNULL"),Object(a.b)("p",null," uint8_t *bssid;               //  MAC\u5730\u5740 \uff0c\u4e0d\u9650\u5b9a\u5219\u4f20 NULL"),Object(a.b)("p",null," void (",Object(a.b)("em",{parentName:"p"},"on_event)(lisa_wifi_connect_event_t "),"event);\t// \u6ce8\u518cwifi\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"typedef struct lisa_wifi_connect_event_t \n")),Object(a.b)("p",null,"wifi\u4e8b\u4ef6\u56de\u8c03\u7ed3\u6784\u4f53\u5b9a\u4e49"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u6210\u5458")),Object(a.b)("p",null,"  lisa_wifi_connect_event_e what;  // \u4e8b\u4ef6\u7c7b\u578b"),Object(a.b)("p",null,"  char ssid","[LISA_WLAN_SSID_MAX_LEN + 1]",";  // ssid\uff0cLISA_WLAN_SSID_MAX_LEN = 32"),Object(a.b)("p",null,"  uint8_t bssid","[6]",";  //  MAC\u5730\u5740 \uff0c\u4e0d\u9650\u5b9a\u5219\u4f20 NULL"),Object(a.b)("p",null,"  uint8_t ip_addr","[4]","; // \u8fd4\u56de\u8fde\u63a5\u6210\u529f\u7684ip\u5730\u5740"),Object(a.b)("p",null,"  uint8_t broadcast_addr","[4]","; // \u8fd4\u56de\u8fde\u63a5\u6210\u529f\u5e7f\u64ad\u5730\u5740"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"what\u53d6\u503c\u8bf4\u660e")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_ON_IDLE\n")),Object(a.b)("p",null," wifi\u672a\u521d\u59cb\u5316"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_ON_CONNECTED\n")),Object(a.b)("p",null," wifi\u5df2\u8fde\u63a5"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{})," LISA_WIFI_ON_CONNECT_FAILED\n")),Object(a.b)("p",null," wifi\u8fde\u63a5\u5931\u8d25"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{})," LISA_WIFI_ON_PSWD_WRONG\n")),Object(a.b)("p",null,"  wifi\u5bc6\u7801\u9519\u8bef"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_ON_DISCONNECTED\n")),Object(a.b)("p",null,"  wifi\u5df2\u65ad\u5f00"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_AP_ASSOCIATED\n")),Object(a.b)("p",null,"  wifi\u70ed\u70b9\u5df2\u8fde\u63a5"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_AP_ASSOCIATE_FAILED\n")),Object(a.b)("p",null,"  wifi\u70ed\u70b9\u8fde\u63a5\u5931\u8d25"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_AP_DISASSOCIATED\n")),Object(a.b)("p",null,"   wifi\u70ed\u70b9\u5df2\u65ad\u5f00"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"typedef struct lisa_wifi_scan_t\n")),Object(a.b)("p",null,"\u70ed\u70b9\u4fe1\u606f\u5b9a\u4e49"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u6210\u5458")),Object(a.b)("p",null,"  char ssid","[33]",";\t\t// \u521b\u5efa\u7684\u70ed\u70b9\u540d\u79f0"),Object(a.b)("p",null,"  char password","[64]",";\t// \u521b\u5efa\u7684\u70ed\u70b9\u5bc6\u7801\uff0c\u4e3a\u7a7a\u5219\u7f6eNULL"),Object(a.b)("p",null,"  uint8_t ch;\t\t\t// \u521b\u5efa\u7684\u70ed\u70b9\u4fe1\u9053\u53f7\uff0c\u9ed8\u8ba4\u4e3a11\u4fe1\u9053\uff0c\u975e\u6cd5\u503c\u6682\u4e0d\u63d0\u9192"),Object(a.b)("p",null,"  uint8_t ip_addr","[4]",";   //  \u521b\u5efa\u7684\u70ed\u70b9IP\u5730\u5740\uff08\u6682\u672a\u5b9e\u73b0\uff09"),Object(a.b)("p",null,"  uint8_t subnet_mask","[4]",";\t //  \u521b\u5efa\u7684\u70ed\u70b9IP\u5730\u5740\u63a9\u7801\uff08\u6682\u672a\u5b9e\u73b0\uff09"),Object(a.b)("p",null,"  uint8_t client_ip_start","[4]",";\t //  \u521b\u5efa\u7684\u70ed\u70b9\u53ef\u5206\u914d\u7684IP\u8d77\u59cb\u5730\u5740\uff08\u6682\u672a\u5b9e\u73b0\uff09"),Object(a.b)("p",null,"  uint8_t client_ip_end","[4]",";\t\t //  \u521b\u5efa\u7684\u70ed\u70b9IP\u5730\u5740\uff08\u6682\u672a\u5b9e\u73b0\uff09"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"enum lisa_wlan_mode_t\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{})," LISA_WIFI_NONE\n")),Object(a.b)("p",null,"   wifi\u5de5\u4f5c\u6a21\u5f0f\u672a\u8bbe\u7f6e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_STATION\n")),Object(a.b)("p",null,"  \u7ad9\u70b9\u6a21\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_WIFI_SOFTAP\n")),Object(a.b)("p",null,"   \u70ed\u70b9\u6a21\u5f0f"),Object(a.b)("h4",{id:"33-\u4f7f\u7528\u793a\u4f8b"},"3.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("p",null,"\u200b\t\u542f\u52a8 WiFi \u529f\u80fd\uff1a>> hal_wifi_demo   init"),Object(a.b)("p",null,'\u200b\t\u542f\u52a8 STA \u6a21\u5f0f\u5e76\u8fde\u5165 WiFi\uff1a>> hal_wifi_demo  join  "wifi_ssid "   " wifi_password"'),Object(a.b)("p",null,'\u200b\t\u542f\u52a8 AP \u6a21\u5f0f\u5e76\u521b\u5efa WiFi \u70ed\u70b9\uff1a>> hal_wifi_demo  ap   "wifi_ssid "   " wifi_password"'),Object(a.b)("p",null,"\u200b\t\u5173\u95ed\u5f53\u524d WiFi \u6a21\u5f0f hal_wifi_demo   down"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'static void\nwifi_event_callback(lisa_wifi_connect_event_t *event)\n{\n  WLAN_DBG("------------event type: [%d]---------------",event->what);\n}\n\nint\nhal_wifi_demo(int argc, char **argv)\n{\n    if (strcmp(argv[1], "init") == 0) {\n        lisa_wifi_init();\n    } else if (strcmp(argv[1], "join") == 0) {\n        lisa_wifi_connect_t test_connect;\n        test_connect.ssid = argv[2];\n\n        test_connect.password = argv[3];\n        test_connect.on_event = wifi_event_callback;\n        lisa_wifi_connect(&test_connect);\n    } else if (strcmp(argv[1], "up") == 0) {\n        /* the key was saved in g_lisa_wlan device */\n        rt_wlan_connect(lisa_wifi_info->g_lisa_wlan, RT_NULL, lisa_wifi_info->g_lisa_wlan->key);\n    } else if (strcmp(argv[1], "down") == 0) {\n        lisa_wifi_disconnect();\n    } else if (strcmp(argv[1], "ap") == 0) {\n        rt_err_t result = RT_EOK;\n        lisa_wifi_ap_t temp_ap;\n        os_memset(temp_ap.ssid, 0, sizeof(temp_ap.ssid));\n        os_memset(temp_ap.password, 0, sizeof(temp_ap.password));\n        lisa_wifi_info->connect_event.on_event = NULL;\n        os_memcpy(temp_ap.ssid, argv[2], strlen((char *)argv[2]) + 1);\n        \n        if (argc == 4) {\n        } else if (argc == 5) {\n            os_memcpy(temp_ap.password, argv[3], strlen((char *)argv[3]) + 1);\n        }\n        temp_ap.ch = 11;\n        result = lisa_wifi_start_ap(&temp_ap);\n        if (result != RT_EOK) {\n            WLAN_DBG("wifi start failed! result=%d\\n", result);\n        }\n    } \n    return 0;\n}\n\nMSH_CMD_EXPORT(hal_wifi_demo, hal_wifi_demo command);\n\n\n')),Object(a.b)("h2",{id:"os"},"OS"),Object(a.b)("p",null,"\u200b\tOS\u7684 API \u51fd\u6570\u4e3a\u5e94\u7528\u5c42\u63d0\u4f9b\u4e86\u7edf\u4e00\u7684\u51fd\u6570\u63a5\u53e3\uff1b\u76ee\u7684\u662f\u5c4f\u853d\u4e0d\u540c OS \u7684 API \u7684\u5dee\u522b\uff0c\u65b9\u4fbf\u5e94\u7528\u5c42\u4ee3\u7801\u5f00\u53d1\u548c\u79fb\u690d"),Object(a.b)("h3",{id:"1-thread"},"1. Thread"),Object(a.b)("h4",{id:"lisa_thread_create"},"lisa_thread_create"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_thread_t *lisa_thread_create(const lisa_thread_attr_t *attr, \n                                    void (*entry)(void *), \n                                    void *arg)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tattr\uff1a\t\t\u7ebf\u7a0b\u5c5e\u6027"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"    typedef struct {\n        char *name;\n        uint32_t stack_size;    // \u6808\u5927\u5c0f\n        uint32_t priority;      // \u4f18\u5148\u7ea7\n    } lisa_thread_attr_t;\n")),Object(a.b)("p",null,"\u200b\tentry\uff1a\t\u7ebf\u7a0b\u51fd\u6570"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"    void (*entry)(void *)\n")),Object(a.b)("p",null,"\u200b\targ\uff1a\t\t\u7ebf\u7a0b\u51fd\u6570\u7684\u53c2\u6570"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tlisa_thread_t * \t\u7ebf\u7a0b\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\t\u8fd4\u56de NULL"),Object(a.b)("p",null,"\u200b\t\u6210\u529f\t\u8fd4\u56de\u975e NULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u521b\u5efa\u7ebf\u7a0b"),Object(a.b)("h4",{id:"lisa_thread_delete"},"lisa_thread_delete"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_thread_delete(lisa_thread_t *thread)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tthread\uff1a\t\u7ebf\u7a0b\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u9500\u6bc1\u7ebf\u7a0b"),Object(a.b)("h4",{id:"lisa_thread_yield"},"lisa_thread_yield"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_thread_yield(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u542f\u52a8\u7ebf\u7a0b\u8c03\u5ea6"),Object(a.b)("h4",{id:"lisa_thread_suspend"},"lisa_thread_suspend"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_thread_suspend(lisa_thread_t *thread)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tthread\uff1a\t\u7ebf\u7a0b\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u6302\u8d77\u7ebf\u7a0b"),Object(a.b)("h4",{id:"lisa_thread_resume"},"lisa_thread_resume"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_thread_resume(lisa_thread_t *thread)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tthread\uff1a\t\u7ebf\u7a0b\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u6062\u590d\u7ebf\u7a0b"),Object(a.b)("h4",{id:"lisa_thread_delay"},"lisa_thread_delay"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_thread_delay(uint32_t ticks)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\ttick\uff1a\t\t\u5ef6\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u7ebf\u7a0b\u5ef6\u65f6\uff0c\u5355\u4f4d\u4e3a\u79d2"),Object(a.b)("h4",{id:"lisa_thread_mdelay"},"lisa_thread_mdelay"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_thread_mdelay(uint32_t ms)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tms\uff1a\t   \u5355\u4f4d\u4e3ams"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u7ebf\u7a0b\u5ef6\u65f6\uff0c\u5355\u4f4d\u4e3ams"),Object(a.b)("h4",{id:"lisa_thread_getcurrent"},"lisa_thread_getcurrent"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_thread_t *lisa_thread_getcurrent(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u6307\u9488"),Object(a.b)("h3",{id:"2-queue"},"2. Queue"),Object(a.b)("h4",{id:"lisa_queue_create"},"lisa_queue_create"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_queue_t *lisa_queue_create(uint32_t count, uint32_t item_size)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tcount\uff1a\t\t\t\u6d88\u606f\u961f\u5217\u4e2d\u6d88\u606f\u7684\u6700\u5927\u4e2a\u6570"),Object(a.b)("p",null,"\u200b\titem_size\uff1a\t  \u5355\u4e2a\u6d88\u606f\u7684\u5927\u5c0f\t"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tlisa_queue_t *\uff1a\u6d88\u606f\u961f\u5217\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u6210\u529f\uff1a\t\u8fd4\u56de\u6d88\u606f\u961f\u5217\u6307\u9488\t"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\uff1a\t\u8fd4\u56de NULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u521b\u5efa\u6d88\u606f\u961f\u5217"),Object(a.b)("h4",{id:"lisa_queue_push"},"lisa_queue_push"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_queue_push(lisa_queue_t *queue, \n                            void *item, \n                            uint32_t item_size, \n                            int32_t wait)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tqueue\uff1a\t\t \u6d88\u606f\u961f\u5217\u6307\u9488"),Object(a.b)("p",null,"\u200b\titem\uff1a\t\t\t\u53d1\u9001\u6570\u636e\u7684\u5730\u5740"),Object(a.b)("p",null,"\u200b\titem_size\uff1a\t\u5355\u4e2a\u6d88\u606f\u7684\u5927\u5c0f"),Object(a.b)("p",null,"\u200b\twait\uff1a\t\t\t\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3ams"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u53d1\u9001\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u51fa\u73b0\u9519\u8bef"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u5411\u6d88\u606f\u961f\u5217\u91cc\u9762\u53d1\u9001\u6d88\u606f"),Object(a.b)("h4",{id:"lisa_queue_receive"},"lisa_queue_receive"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_queue_receive(lisa_queue_t *queue, \n                                void *item, \n                                uint32_t item_size, \n                                int32_t wait)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tqueue\uff1a\t\t\u6d88\u606f\u961f\u5217\u6307\u9488"),Object(a.b)("p",null,"\u200b\titem\uff1a\t\t    \u63a5\u6536\u6570\u636e\u7684\u6307\u9488"),Object(a.b)("p",null,"\u200b\titem_size\uff1a    \u5355\u4e2a\u6d88\u606f\u7684\u5927\u5c0f"),Object(a.b)("p",null,"\u200b\twait\uff1a\t\t\t \u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3ams"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u63a5\u6536\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u51fa\u73b0\u9519\u8bef"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u4ece\u6d88\u606f\u961f\u5217\u91cc\u9762\u63a5\u6536\u6d88\u606f\uff1b\u5982\u679c\u8d85\u65f6\u65f6\u95f4\u5230\u4e86\uff0c\u8fd8\u6ca1\u6709\u6536\u5230\u6d88\u606f\uff0c\u90a3\u4e48\u8fd4\u56de LISA_FAIL\uff1b\u5728\u8d85\u65f6\u65f6\u95f4\u5230\u8fbe\u524d\u6536\u5230\u6d88\u606f\uff0c\u90a3\u4e48\u8fd4\u56de LISA_OK\uff1b"),Object(a.b)("h4",{id:"lisa_queue_delete"},"lisa_queue_delete"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_queue_delete(lisa_queue_t *queue)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tqueue\uff1a\u6d88\u606f\u961f\u5217\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u9500\u6bc1\u6d88\u606f\u961f\u5217"),Object(a.b)("h4",{id:"lisa_queue_available"},"lisa_queue_available"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_queue_available(lisa_queue_t *queue)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tqueue\uff1a\u6d88\u606f\u961f\u5217\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\t\u6d88\u606f\u961f\u5217\u4e2d\u5269\u4f59\u53ef\u7528\u7684\u6d88\u606f\u7684\u4e2a\u6570"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u67e5\u8be2\u6d88\u606f\u961f\u5217\u4e2d\u7a7a\u95f2\u6d88\u606f\u7684\u4e2a\u6570"),Object(a.b)("h4",{id:"lisa_queue_waiting"},"lisa_queue_waiting"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_queue_waiting(lisa_queue_t *queue)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tqueue\uff1a\u6d88\u606f\u961f\u5217\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\t\u6d88\u606f\u961f\u5217\u4e2d\u5df2\u6709\u6d88\u606f\u7684\u4e2a\u6570"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u67e5\u8be2\u6d88\u606f\u961f\u5217\u4e2d\u6b63\u5728\u7b49\u5f85\u7684\u6d88\u606f\u7684\u4e2a\u6570"),Object(a.b)("h4",{id:"lisa_queue_clear"},"lisa_queue_clear"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_queue_clear(lisa_queue_t *queue)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tqueue\uff1a\u6d88\u606f\u961f\u5217\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u590d\u4f4d\u6d88\u606f\u961f\u5217\uff0c\u6b64\u51fd\u6570\u4f1a\u6e05\u7a7a\u6d88\u606f\u961f\u5217"),Object(a.b)("h3",{id:"3-mutex"},"3. Mutex"),Object(a.b)("h4",{id:"lisa_mutex_create"},"lisa_mutex_create"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_mutex_t *lisa_mutex_create(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tlisa_mutex_t*\uff1a\u4e92\u65a5\u91cf\u7684\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u6210\u529f\uff1a\t\u8fd4\u56de\u4e92\u65a5\u91cf\u6307\u9488\t"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\uff1a\t\u8fd4\u56deNULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u521b\u5efa\u4e92\u65a5\u91cf"),Object(a.b)("h4",{id:"lisa_mutex_lock"},"lisa_mutex_lock"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_mutex_lock(lisa_mutex_t *mutex, int32_t block_time)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tmutex\uff1a\t\t\u4e92\u65a5\u91cf\u6307\u9488"),Object(a.b)("p",null,"\u200b\tblock_time\uff1a\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3ams"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u4e92\u65a5\u91cf\u4e0a\u9501\uff0c\u5982\u679c\u8d85\u65f6\u65f6\u95f4\u5230\u4e86\uff0c\u8fd8\u65e0\u6cd5\u83b7\u5f97\u9501\uff0c\u90a3\u4e48\u8fd4\u56de LISA_FAIL\uff1b\u5728\u8d85\u65f6\u65f6\u95f4\u5230\u8fbe\u524d\u83b7\u5f97\u9501\uff0c\u90a3\u4e48\u8fd4\u56de LISA_OK\uff1b"),Object(a.b)("h4",{id:"lisa_mutex_unlock"},"lisa_mutex_unlock"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_mutex_unlock(lisa_mutex_t *mutex)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tmutex\uff1a\t\t\u4e92\u65a5\u91cf\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u4e92\u65a5\u91cf\u89e3\u9501"),Object(a.b)("h4",{id:"lisa_mutex_delete"},"lisa_mutex_delete"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_mutex_delete(lisa_mutex_t *mutex)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tmutex\uff1a\t\t\u4e92\u65a5\u91cf\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u9500\u6bc1\u4e92\u65a5\u91cf"),Object(a.b)("h3",{id:"4-semaphore"},"4 .Semaphore"),Object(a.b)("h4",{id:"lisa_semaphore_create"},"lisa_semaphore_create"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_semaphore_t *lisa_semaphore_create(uint32_t count)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tcount\uff1a\t\t\u4fe1\u53f7\u91cf\u6700\u5927\u4e2a\u6570"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tlisa_semaphore_t *\uff1a\t\u4fe1\u53f7\u91cf\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u6210\u529f\uff1a\t\u8fd4\u56de\u4fe1\u53f7\u91cf\u6307\u9488\t"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\uff1a\t\u8fd4\u56deNULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u521b\u5efa\u4fe1\u53f7\u91cf"),Object(a.b)("h4",{id:"lisa_semaphore_take"},"lisa_semaphore_take"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_semaphore_take(lisa_semaphore_t *sem, int32_t block_time)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tsem\uff1a\t\t\t\u4fe1\u53f7\u91cf\u6307\u9488"),Object(a.b)("p",null,"\u200b\tblock_time\uff1a\u8d85\u65f6\u65f6\u95f4"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u83b7\u53d6\u4fe1\u53f7\u91cf\uff0c\u5982\u679c\u8d85\u65f6\u65f6\u95f4\u5230\u4e86\uff0c\u8fd8\u65e0\u6cd5\u83b7\u5f97\u4fe1\u53f7\u91cf\uff0c\u90a3\u4e48\u8fd4\u56deLISA_FAIL\uff1b\u5728\u8d85\u65f6\u65f6\u95f4\u5230\u8fbe\u524d\u83b7\u5f97\u4fe1\u53f7\u91cf\uff0c\u90a3\u4e48\u8fd4\u56deLISA_OK\uff1b"),Object(a.b)("h4",{id:"lisa_semaphore_give"},"lisa_semaphore_give"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_semaphore_give(lisa_semaphore_t *sem)\n")),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",Object(b.a)({parentName:"tr"},{align:null}),"\u5165\u53c2"),Object(a.b)("th",Object(b.a)({parentName:"tr"},{align:null}),"\u6ce8\u91ca"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",Object(b.a)({parentName:"tr"},{align:null}),"mutex"),Object(a.b)("td",Object(b.a)({parentName:"tr"},{align:null}),"\u4fe1\u53f7\u91cf\u6307\u9488")))),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u91ca\u653e\u4fe1\u53f7\u91cf"),Object(a.b)("h4",{id:"lisa_semaphore_delete"},"lisa_semaphore_delete"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_semaphore_delete(lisa_semaphore_t *sem)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tmutex\uff1a\t\t\u4fe1\u53f7\u91cf\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u9500\u6bc1\u4fe1\u53f7\u91cf"),Object(a.b)("h4",{id:"lisa_semaphore_getcount"},"lisa_semaphore_getcount"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_semaphore_getcount(lisa_semaphore_t *sem)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tmutex\uff1a\t\t\u4fe1\u53f7\u91cf\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\t\u53ef\u7528\u7684\u4fe1\u53f7\u91cf\u4e2a\u6570"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u83b7\u53d6\u53ef\u7528\u7684\u4fe1\u53f7\u91cf\u4e2a\u6570"),Object(a.b)("h3",{id:"5-timer"},"5. Timer"),Object(a.b)("h4",{id:"lisa_timer_create"},"lisa_timer_create"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_timer_t *lisa_timer_create(lisa_timertype type, \n                                lisa_timercb_t cb, \n                                void *arg, \n                                uint32_t period_ms)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\ttype\uff1a\t\t\u5b9a\u65f6\u5668\u7c7b\u578b"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"    typedef enum {\n        OS_TIMER_ONCE = 0,      // \u5355\u6b21\u5b9a\u65f6\u5668\n        OS_TIMER_PERIODIC = 1,  // \u5468\u671f\u5b9a\u65f6\u5668\n    } lisa_timertype;\n")),Object(a.b)("p",null,"\u200b\tcb\uff1a\t\t\t\u5b9a\u65f6\u5668\u56de\u8c03\u51fd\u6570"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"    typedef void (*lisa_timercb_t)(void *arg)\n")),Object(a.b)("p",null,"\u200b\targ\uff1a\t\t  \u5b9a\u65f6\u5668\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570"),Object(a.b)("p",null,"\u200b\tperiod_ms\uff1a\u5b9a\u65f6\u5668\u7684\u5468\u671f\uff0c\u5355\u4f4dms"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tlisa_timer_t *\uff1a\t\u5b9a\u65f6\u5668\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u6210\u529f\uff1a\t\u8fd4\u56de\u5b9a\u65f6\u5668\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\uff1a\t\u8fd4\u56deNULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u521b\u5efa\u8f6f\u4ef6\u5b9a\u65f6\u5668"),Object(a.b)("h4",{id:"lisa_timer_delete"},"lisa_timer_delete"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_timer_delete(lisa_timer_t *timer)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\ttimer\uff1a\t\t\u5b9a\u65f6\u5668\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u9500\u6bc1\u5b9a\u65f6\u5668"),Object(a.b)("h4",{id:"lisa_timer_start"},"lisa_timer_start"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_timer_start(lisa_timer_t *timer)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\ttimer\uff1a\t\t\u5b9a\u65f6\u5668\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u542f\u52a8\u5b9a\u65f6\u5668"),Object(a.b)("h4",{id:"lisa_timer_stop"},"lisa_timer_stop"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_timer_stop(lisa_timer_t *timer)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\ttimer\uff1a\t\t\u5b9a\u65f6\u5668\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u505c\u6b62\u5b9a\u65f6\u5668"),Object(a.b)("h4",{id:"lisa_timer_change_period"},"lisa_timer_change_period"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_timer_change_period(lisa_timer_t *timer, uint32_t period_ms)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\ttimer\uff1a\t\t\u5b9a\u65f6\u5668\u6307\u9488"),Object(a.b)("p",null,"\u200b\tperiod\uff1a\t  \u5b9a\u65f6\u5668\u5468\u671f\uff0c\u5355\u4f4dms"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tLISA_OK\uff1a\t\u6210\u529f\t"),Object(a.b)("p",null,"\u200b\tLISA_FAIL\uff1a  \u5931\u8d25"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u4fee\u6539\u5b9a\u65f6\u5668\u5468\u671f"),Object(a.b)("h3",{id:"6-time"},"6 .Time"),Object(a.b)("h4",{id:"lisa_os_get_ticks"},"lisa_os_get_ticks"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_os_get_ticks(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\t\u8fd4\u56de\u4ece OS \u542f\u52a8\u540e\u5230\u73b0\u5728\u4e3a\u6b62\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\u4e3a\u65f6\u95f4\u7247\uff0c\u65f6\u95f4\u7247\u7531\u5177\u4f53 OS \u5b9e\u73b0\u51b3\u5b9a"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u83b7\u5f97 OS \u542f\u52a8\u5230\u73b0\u5728\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\u4e3a\u65f6\u95f4\u7247"),Object(a.b)("h4",{id:"lisa_os_get_time"},"lisa_os_get_time"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_os_get_time(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\t\u8fd4\u56de\u4ece OS \u542f\u52a8\u540e\u5230\u73b0\u5728\u4e3a\u6b62\u7684\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u83b7\u5f97 OS \u542f\u52a8\u5230\u73b0\u5728\u7684\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2"),Object(a.b)("h4",{id:"lisa_rand32"},"lisa_rand32"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_rand32(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\t\u8fd4\u56de\u968f\u673a\u503c\uff08\u76f4\u63a5\u8fd4\u56deos\u7684\u5f53\u524dtick\u503c\uff09"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u83b7\u5f9732\u4f4d\u968f\u673a\u503c"),Object(a.b)("h3",{id:"7memory"},"7.Memory"),Object(a.b)("h4",{id:"lisa_mem_alloc"},"lisa_mem_alloc"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"void *lisa_mem_alloc(uint32_t size);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tsize\uff1a\u5927\u5c0f\u4e3abyte"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tvoid* "),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4"),Object(a.b)("h4",{id:"lisa_mem_realloc"},"lisa_mem_realloc"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"void *lisa_mem_realloc(void *ptr, uint32_t size)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tptr\uff1a\u5185\u5b58\u7a7a\u95f4\u5730\u5740"),Object(a.b)("p",null,"\u200b\tsize\uff1a\u7533\u8bf7\u5185\u5b58\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3abyte"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tvoid* "),Object(a.b)("p",null,"\u200b\t\u6210\u529f\uff1a\u8fd4\u56de\u975eNULL\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\uff1a\u8fd4\u56deNULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u91cd\u65b0\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4"),Object(a.b)("h4",{id:"lisa_mem_calloc"},"lisa_mem_calloc"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"void *lisa_mem_calloc(uint32_t count, uint32_t size)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tcount\uff1a\u5185\u5b58\u5757\u4e2a\u6570"),Object(a.b)("p",null,"\u200b\tsize\uff1a\u5355\u4e2a\u5185\u5b58\u5757\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3abyte"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tvoid* "),Object(a.b)("p",null,"\u200b\t\u6210\u529f\uff1a\u8fd4\u56de\u975eNULL\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\uff1a\u8fd4\u56deNULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u7533\u8bf7count*size\u7684\u5185\u5b58\u7a7a\u95f4"),Object(a.b)("h4",{id:"lisa_mem_free"},"lisa_mem_free"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"void lisa_mem_free(void *ptr)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\tptr\uff1a\u5185\u5b58\u7a7a\u95f4\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u91ca\u653e\u5185\u5b58\u7a7a\u95f4"),Object(a.b)("h4",{id:"lisa_strdup"},"lisa_strdup"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"char *lisa_strdup(const char *s)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570"),"\uff1a"),Object(a.b)("p",null,"\u200b\ts\uff1a\u5b57\u7b26\u4e32"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c\uff1a")),Object(a.b)("p",null,"\u200b\tchar*"),Object(a.b)("p",null,"\u200b\t\u6210\u529f\uff1a\u8fd4\u56de\u975eNULL\u6307\u9488"),Object(a.b)("p",null,"\u200b\t\u5931\u8d25\uff1a\u8fd4\u56deNULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e:")),Object(a.b)("p",null,"\u200b\t\u5b57\u7b26\u4e32\u62f7\u8d1d\u51fd\u6570"),Object(a.b)("h2",{id:"component"},"Component"),Object(a.b)("h3",{id:"1-\u64ad\u653e\u5668"},"1. \u64ad\u653e\u5668"),Object(a.b)("h4",{id:"11-\u7b80\u4ecb-1"},"1.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u79fb\u690d LISA \u7cfb\u7edf\u9700\u8981\u5f53\u524d\u73af\u5883\u652f\u6301\u53cc\u64ad\u653e\u5668\u5b9e\u4f8b\uff0c\u64ad\u653e\u56681\u4e3b\u8981\u7528\u4e8e\u64ad\u653e\u97f3\u4e50\u548c\u8ba2\u9605\u7684\u5185\u5bb9\u4e14\uff0c\u64ad\u653e\u5668\u4e8c\u4e3b\n\u8981\u7528\u4e8e\u64ad\u653e tts \u63d0\u793a\u97f3\u3002"),Object(a.b)("h4",{id:"12-\u63a5\u53e3\u8bf4\u660e-1"},"1.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_player_t *lisa_player_init(lisa_player_params_t *params);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   params\t\t\t\t\u64ad\u653e\u5668\u914d\u7f6e\u53c2\u6570"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"       typedef enum {\n            LISA_PLAYER_TYPE_ONE = 0,\n            LISA_PLAYER_TYPE_TWO,           //\u53ea\u652f\u6301mp3\u548cwav\u683c\u5f0f\n            LISA_PLAYER_TYPE_MAX\n        } lisa_player_type_e;\n       \n       typedef enum {\n            LISA_PLAYER_EVENT_ERROR,\n            LISA_PLAYER_EVENT_PREPARED,     //\u672a\u652f\u6301\n            LISA_PLAYER_EVENT_STARTED,      //\u5df2\u64ad\u653e\n            LISA_PLAYER_EVENT_STOPPED,      //\u505c\u6b62\n            LISA_PLAYER_EVENT_PAUSED,       //\u6682\u5b9a\n            LISA_PLAYER_EVENT_RESUMED,      //\u6062\u590d\u64ad\u653e\n            LISA_PLAYER_EVENT_FINISHED,     //\u64ad\u653e\u5b8c\u6bd5\n        } lisa_player_event_e;\n        \n        typedef struct {    \n            void *user;                     //\u56de\u8c03\u53c2\u6570\n            lisa_player_type_e type;        //\u64ad\u653e\u5668\u7c7b\u578b\n            lisa_player_cb cb;              //\u6ce8\u518c\u56de\u8c03\uff0c\u56de\u8c03\u4e8b\u4ef6\u89c1lisa_player_event_e\n        } lisa_player_params_t;\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\u64ad\u653e\u5668\u5b9e\u4f8b\uff1b\u5931\u8d25\u8fd4\u56deNULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u521b\u5efa\u64ad\u653e\u5668\u5b9e\u4f8b\uff0c\u6ce8\u518c\u5bf9\u5e94\u64ad\u653e\u5668\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\u3002\u6ce8\u610f\u64ad\u653e\u5668 LISA_PLAYER_TYPE_TWO \u53ea\u652f\u6301mp3\u548cwav\u683c\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_prepare_url(lisa_player_t *ins, const char *url)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,"   url\t\tURL\u6307\u9488"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u64ad\u653e\u524d\u52a0\u8f7d\u8d44\u6e90\uff0c\u53ef\u4ee5\u662f\u7f51\u7edcurl\uff0c\u4e5f\u53ef\u4ee5\u662f\u6253\u5305\u5728\u6587\u4ef6\u7cfb\u7edf\u7684\u8d44\u6e90\u8def\u5f84"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_set_callback(lisa_player_t *ins, lisa_player_cb callback)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,"   callback\t\t\u56de\u8c03\u51fd\u6570"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u64ad\u653e\u5668\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u5728 lisa_player_init \u521b\u5efa\u5b9e\u4f8b\u4e2d\u6ce8\u518c\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8be5\u51fd\u6570\u91cd\u65b0\u6ce8\u518c"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_play(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u52a0\u8f7d\u8d44\u6e90\u540e\uff0c\u5f00\u59cb\u64ad\u653e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_stop(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u505c\u6b62\u64ad\u653e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_pause(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u6682\u505c\u64ad\u653e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_resume(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u6062\u590d\u64ad\u653e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_player_state_e lisa_player_get_state(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u5f53\u524d\u64ad\u653e\u5668\u72b6\u6001\t\t"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"        typedef enum {\n            LISA_PLAYER_STAUS_PLAYING = 0,          //\u6b63\u5728\u64ad\u653e\n            LISA_PLAYER_STATUS_PAUSED,              //\u6682\u505c\u64ad\u653e\n            LISA_PLAYER_STATUS_STOPPED,             //\u505c\u6b62\u64ad\u653e\n\n            LISA_PLAYER_ERR,\n        } lisa_player_state_e;\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u4e3b\u52a8\u83b7\u53d6\u5f53\u524d\u64ad\u653e\u5668\u72b6\u6001"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_seek(lisa_player_t *ins, uint32_t progress_ms)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,"   progress_ms\t\t\u5f85seek\u7684\u65f6\u95f4\u70b9"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u5728\u64ad\u653e\u8fc7\u7a0b\u4e2d seek music"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_player_get_progress(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u5f53\u524d\u64ad\u653e\u8fdb\u5ea6\u65f6\u95f4\uff0c\u5355\u4f4dms"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u5728\u64ad\u653e\u8fc7\u7a0b\u4e2d\u83b7\u53d6\u5f53\u524d\u64ad\u653e\u5668\u8fdb\u5ea6"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint32_t lisa_player_get_duration(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u5f53\u524d\u6b4c\u66f2\u603b\u957f\uff0c\u5355\u4f4dms"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u5728\u64ad\u653e\u8fc7\u7a0b\u4e2d\u83b7\u53d6\u5f53\u524d\u6b4c\u66f2\u603b\u957f"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"lisa_err_t lisa_player_set_volume(lisa_player_t *ins, uint8_t volume)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,"   volume\t\t\u97f3\u91cf\u5927\u5c0f\uff0c0~100"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u8c03\u6574\u5bf9\u5e94\u64ad\u653e\u5668\u97f3\u91cf\u5927\u5c0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"uint8_t lisa_player_get_volume(lisa_player_t *ins)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\t\u64ad\u653e\u5668\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u97f3\u91cf\u5927\u5c0f"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u83b7\u53d6\u5bf9\u5e94\u64ad\u653e\u5668\u97f3\u91cf\u5927\u5c0f"),Object(a.b)("h4",{id:"13-\u4f7f\u7528\u793a\u4f8b-1"},"1.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'lisa_player_t *g_player1 = NULL;\nlisa_player_t *g_player2 = NULL;\n\nstatic struct optparse_long opts[] = {{"version", \'V\', OPTPARSE_NONE}, /* \u7248\u672c */\n        {"help", \'h\', OPTPARSE_NONE}, /* \u5e2e\u52a9 */\n        {"start", \'s\', OPTPARSE_REQUIRED}, /* \u64ad\u653e */\n        {"stop", \'t\', OPTPARSE_NONE}, /* \u505c\u6b62 */\n        {"pause", \'p\', OPTPARSE_NONE}, /* \u6682\u505c */\n        {"resume", \'r\', OPTPARSE_NONE}, /* \u6062\u590d */\n        {"seek", \'k\', OPTPARSE_REQUIRED}, /* \u79fb\u52a8 */\n        {"volume", \'v\', OPTPARSE_REQUIRED}, /* \u97f3\u91cf */\n        {"dump", \'d\', OPTPARSE_NONE}, /* \u4fe1\u606f */\n        {NULL, 0, OPTPARSE_NONE}};\n\nstatic void\n\nusage(void)\n{\n    rt_kprintf("usage: player [type][option] [target] ...\\n\\n");\n    rt_kprintf("type options: 1|2\\n");\n\n    rt_kprintf("usage options:\\n");\n    rt_kprintf("  -V,     --version                  Print player version message.\\n");\n    rt_kprintf("  -h,     --help                     Print defined help message.\\n");\n    rt_kprintf(\n            "  -s URI, --start=URI                Play music with URI(network links or local "\n            "files).\\n");\n    rt_kprintf("  -t,     --stop                     Stop playing music.\\n");\n    rt_kprintf("  -p,     --pause                    Pause the music.\\n");\n    rt_kprintf("  -r,     --resume                   Resume the music.\\n");\n    rt_kprintf("  -k sec, --seek=sec                 Seek the specified seconds to play.\\n");\n    rt_kprintf("  -v lvl, --volume=lvl               Change the volume(0~99).\\n");\n    rt_kprintf("  -d,     --dump                     Dump play relevant information.\\n");\n}\n\n#if 1\nstatic void\ndump_status(uint8_t type)\n{\n    lisa_player_t *playobj;\n    const char *state[] = {"PLAYING", "PAUSED", "STOPPED"};\n    if (1 == type) {\n        playobj = g_player1;\n    } else {\n        playobj = g_player2;\n    }\n\n    rt_kprintf("\\nPlayer Dump Status:\\n");\n    rt_kprintf("status   - %s\\n", state[lisa_player_get_state(playobj)]);\n    // rt_kprintf("URI      - %s\\n", (player_get_uri() != NULL) ? player_get_uri() : "NULL");\n    rt_kprintf("volume   - %d\\n", lisa_player_get_volume(playobj));\n    rt_kprintf("codec    - %s\\n", audio_codec_tostring(audio_codec_get()));\n\n    if ((int)lisa_player_get_state(playobj) != (int)LISA_PLAYER_STATUS_STOPPED) {\n        int value;\n\n        value = lisa_player_get_duration(playobj);\n        rt_kprintf("duration - %02d:%02d\\n", value / 60, value % 60);\n\n        value = lisa_player_get_progress(playobj) / 1000;\n        rt_kprintf("position - %02d:%02d\\n", value / 60, value % 60);\n    }\n}\n#endif\nvoid\nplayer1_test_cb(lisa_player_event_e event, void *user)\n{\n    rt_kprintf("player1 event %d\\n", event);\n}\n\nvoid\nplayer2_test_cb(lisa_player_event_e event, void *user)\n{\n    rt_kprintf("player2 event %d\\n", event);\n}\n\nstatic int\nplayer_test(int argc, char *argv[])\n{\n    if (argc == 1) {\n        usage();\n        return RT_EOK;\n    }\n\n    uint8_t type = atoi(argv[1]);\n\n    if (strcmp(argv[2], "-s") == 0) {\n        rt_kprintf("player%d start in\\n", type);\n        if (1 == type) {\n            if (NULL == g_player1) {\n                lisa_player_params_t para;\n                memset(&para, 0, sizeof(lisa_player_params_t));\n                para.type = LISA_PLAYER_TYPE_ONE;\n                g_player1 = lisa_player_init(&para);\n            }\n\n            lisa_player_set_callback(g_player1, player1_test_cb);\n\n            lisa_player_prepare_url(g_player1, argv[3]);\n\n            lisa_player_play(g_player1);\n\n        } else {\n            if (NULL == g_player2) {\n                lisa_player_params_t para;\n                memset(&para, 0, sizeof(lisa_player_params_t));\n                para.type = LISA_PLAYER_TYPE_TWO;\n                g_player2 = lisa_player_init(&para);\n            }\n\n            lisa_player_set_callback(g_player2, player2_test_cb);\n\n            lisa_player_prepare_url(g_player2, argv[3]);\n\n            lisa_player_play(g_player2);\n        }\n\n        rt_kprintf("player%d start out\\n", type);\n    } else if (strcmp(argv[2], "-p") == 0) {\n        rt_kprintf("player%d pause in\\n", type);\n        if (1 == type) {\n            lisa_player_pause(g_player1);\n        } else {\n            lisa_player_pause(g_player2);\n        }\n        rt_kprintf("player%d pause out\\n", type);\n    } else if (strcmp(argv[2], "-r") == 0) {\n        rt_kprintf("player%d resume in\\n", type);\n        if (1 == type) {\n            lisa_player_resume(g_player1);\n        } else {\n            lisa_player_resume(g_player2);\n        }\n        rt_kprintf("player%d resume in\\n", type);\n    } else if (strcmp(argv[2], "-t") == 0) {\n        rt_kprintf("player%d stop in\\n", type);\n        if (1 == type) {\n            lisa_player_stop(g_player1);\n        } else {\n            lisa_player_stop(g_player2);\n        }\n        rt_kprintf("player%d stop in\\n", type);\n    } else if (strcmp(argv[2], "-v") == 0) {\n        uint8_t volume = atoi(argv[3]);\n        rt_kprintf("player%d set volume%d in\\n", type, volume);\n        if (1 == type) {\n            lisa_player_set_volume(g_player1, volume);\n        } else {\n            lisa_player_set_volume(g_player2, volume);\n        }\n        rt_kprintf("player%d set volume%d in\\n", type, volume);\n    } else if (strcmp(argv[2], "-d") == 0) {\n        dump_status(type);\n    } else if (strcmp(argv[2], "-k") == 0) {\n        uint32_t seek = atoi(argv[3]);\n        if (1 == type) {\n            lisa_player_seek(g_player1, seek);\n        } else {\n            lisa_player_seek(g_player2, seek);\n        }\n        rt_kprintf("player%d seek %d\\n", type, seek);\n    }\n\n    return RT_EOK;\n}\n\nMSH_CMD_EXPORT(player_test, persistence testself);\n')),Object(a.b)("h2",{id:"log"},"Log"),Object(a.b)("h3",{id:"1-\u65e5\u5fd7"},"1. \u65e5\u5fd7"),Object(a.b)("h4",{id:"11-\u7b80\u4ecb-2"},"1.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u200b\t\u63d0\u4f9b\u901a\u7528\u7684\u65e5\u5fd7\u6253\u5370\u51fd\u6570\uff0c\u5177\u5907\u5e38\u7528\u7684\u65e5\u5fd7\u5206\u7ea7\u8f93\u51fa\u3001tag \u6807\u8bb0\u7684\u80fd\u529b"),Object(a.b)("h4",{id:"12-\u63a5\u53e3\u8bf4\u660e-2"},"1.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("h4",{id:"\u65e5\u5fd7\u7b49\u7ea7"},"\u65e5\u5fd7\u7b49\u7ea7"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"#define LOG_LEVEL_NONE      (0)     //   \n#define LOG_LEVEL_ERROR     (1)     //  \u9519\u8bef\n#define LOG_LEVEL_WARN      (2)     //  \u8b66\u544a\n#define LOG_LEVEL_INFO      (3)     //  \u4fe1\u606f\n#define LOG_LEVEL_DEBUG     (4)     //  \u8c03\u8bd5\n")),Object(a.b)("h4",{id:"\u65e5\u5fd7\u6253\u5370\u51fd\u6570"},"\u65e5\u5fd7\u6253\u5370\u51fd\u6570"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"LISA_LOGV(tag, format, ...);        // \u8f93\u51fa\u5168\u90e8\u65e5\u5fd7\nLISA_LOGE(tag, format, ...);        // \u8f93\u51fa\u9519\u8bef\u65e5\u5fd7\nLISA_LOGW(tag, format, ...);        // \u8f93\u51fa\u8b66\u544a\u65e5\u5fd7\nLISA_LOGI(tag, format, ...);        // \u8f93\u51fa\u4fe1\u606f\u65e5\u5fd7\nLISA_LOGD(tag, format, ...);        // \u8f93\u51fa\u8c03\u8bd5\u65e5\u5fd7\n")),Object(a.b)("h4",{id:"\u65ad\u8a00"},"\u65ad\u8a00"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"#define LISA_OK (int32_t)(0)\n#define LISA_FAIL (int32_t)(-1)\n\nLISA_APP_ASSERT(exp, fmt, ...)  // \u7ebf\u7a0b\u65ad\u8a00\nLISA_ISR_ASSERT(exp, fmt, ...)  // \u4e2d\u65ad\u65ad\u8a00\n")),Object(a.b)("h2",{id:"modules"},"Modules"),Object(a.b)("h3",{id:"1-button\u68c0\u6d4b"},"1 .button\u68c0\u6d4b"),Object(a.b)("h4",{id:"11-\u7b80\u4ecb-3"},"1.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u57fa\u4e8e multibutton \u5c01\u88c5\u6309\u952e\u63a5\u53e3,\u652f\u6301\u77ed\u6309\uff0c\u957f\u6309\u3002"),Object(a.b)("h4",{id:"12-\u63a5\u53e3\u8bf4\u660e-3"},"1.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_keys_init(lisa_keys_on_event event_cb)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\tevent_cb\t\t\u6ce8\u518c\u6309\u952e\u56de\u8c03\u51fd\u6570"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"        \n        #define KEY_TYPE_SHORT (1 << 0)             //\u77ed\u6309\n        #define KEY_TYPE_LONG (1 << 1)              //\u957f\u6309\n        #define KEY_TYPE_DOUBLETICK (1 << 2)        //\u53cc\u51fb\n        \n        typedef struct {\n            uint8_t type_e;             //\u6309\u952e\u4e8b\u4ef6\u7c7b\u578b\n            uint8_t key_index;          //\u6309\u952e\u53f7\n        } lisa_key_event;\n\n        typedef void (*lisa_keys_on_event)(lisa_key_event *event);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u901a\u8fc7\u8be5\u51fd\u6570\u6ce8\u518c\u6309\u952e\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u4e14\u542f\u52a8\u6309\u952e\u68c0\u6d4b\u3002\u53e6\u5916\u8fd8\u9700\u7ed3\u5408\u786c\u4ef6\u7535\u8def\u914d\u7f6e\u5408\u9002\u7684 button_config g_button[]"),Object(a.b)("p",null,"\u200b\t\u4e0b\u9762\u914d\u7f6e\u5bf9\u5e94\u786c\u4ef6\u5173\u8054\u4e3a\uff1a"),Object(a.b)("p",null,"\u200b\t\t\t\u6309\u952e2,3\u4e00\u8d77\u901a\u8fc7 adc6 \u68c0\u6d4b\uff0c\u6309\u952e2\u5355\u72ec\u6309\u4e0b\u7535\u538b\u68c0\u6d4b\u503c\u4e3a1.3\u5de6\u53f3\uff0c\u6309\u952e3\u5355\u72ec\u6309\u4e0b\u7535\u538b\u68c0\u6d4b\u503c\u4e3a0.9\u5de6\u53f3\uff1b"),Object(a.b)("p",null,"\u200b\t\t\t\u6309\u952e4,5\u4e00\u8d77\u901a\u8fc7 adc7 \u68c0\u6d4b\uff0c\u6309\u952e4\u5355\u72ec\u6309\u4e0b\u7535\u538b\u68c0\u6d4b\u503c\u4e3a1.3\u5de6\u53f3\uff0c\u6309\u952e5\u5355\u72ec\u6309\u4e0b\u7535\u538b\u68c0\u6d4b\u503c\u4e3a0.9\u5de6\u53f3\uff1b"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"    button_config g_button[4] = { \n            [0] = {.type = KEY_TYPE_SHORT | KEY_TYPE_LONG,      //\u652f\u6301\u77ed\u6309\u548c\u957f\u6309\n                    .key_index = 2,                             //\u6309\u952e\u53f7\n                    .ad_confg.channel = 6,                      //\u901a\u8fc7\u901a\u90536\u7684adc\u68c0\u6d4b\n                    .ad_confg.lowValue = 1100,                  //1100mv~1600mv \u662f\u6309\u952e\u6309\u4e0b\u72b6\u6001\u3002\n                    .ad_confg.highValue = 1600},  \n\n            [1] = {.type = KEY_TYPE_SHORT | KEY_TYPE_LONG,\n                    .key_index = 3,\n                    .ad_confg.channel = 6,\n                    .ad_confg.lowValue = 700,\n                    .ad_confg.highValue = 1100},  \n\n            [2] = {.type = KEY_TYPE_SHORT | KEY_TYPE_LONG,\n                    .key_index = 4,\n                    .ad_confg.channel = 7,\n                    .ad_confg.lowValue = 700,\n                    .ad_confg.highValue = 1100},  \n            [3] = {.type = KEY_TYPE_SHORT | KEY_TYPE_LONG,\n                    .key_index = 5,\n                    .ad_confg.channel = 7,\n                    .ad_confg.lowValue = 1100,\n                    .ad_confg.highValue = 1600},  \n\n    };\n")),Object(a.b)("p",null,"\u200b\t"),Object(a.b)("h4",{id:"13-\u4f7f\u7528\u793a\u4f8b-2"},"1.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("p",null,"\u9700\u7ed3\u5408\u786c\u4ef6\u7535\u8def\u8bbe\u8ba1\uff0c\u914d\u7f6e\u5408\u9002\u7684 button_config"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'void\nlisa_button_cb(lisa_key_event *event)\n{\n    LISA_LOGE(TAG, "lisa_button_cb key %d  type %d", event->key_index, event->type_e);\n}\n\nstatic int\nlisa_button(int argc, char *argv[])\n{\n    LISA_LOGE(TAG, "lisa_button test ///////////////////");\n    lisa_keys_init(lisa_button_cb);\n\n    return 0;\n}\n\nMSH_CMD_EXPORT(lisa_button, button testself);\n')),Object(a.b)("h3",{id:"2-led\u663e\u793a"},"2. led\u663e\u793a"),Object(a.b)("h4",{id:"21-\u7b80\u4ecb-1"},"2.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u901a\u8fc73\u8def PWM \u63a7\u5236 RGB led \u5b8c\u6210\u663e\u793a\u529f\u80fd\uff0c\u652f\u6301\u5e38\u4eae\uff0c\u5173\u95ed\uff0c\u95ea\u70c1\uff0c\u547c\u5438\u706f\u3002"),Object(a.b)("h4",{id:"22-\u63a5\u53e3\u8bf4\u660e-1"},"2.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_led_init(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   void"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u5b8c\u6210led\u663e\u793a\u6a21\u5757\u521d\u59cb\u5316\uff0c\u914d\u7f6e\u76f8\u5173pwm\u53f7"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_rgbled_ctr(lisa_led_mode_e mode, uint32_t rgb, uint16_t flash_cnt)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   mode\t\t\t\u663e\u793a\u6a21\u5f0f\t"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"            typedef enum {\n                LED_MODE_ON = 0,    //\u5e38\u4eae\n                LED_MODE_OFF,       //\u5e38\u706d\n                LED_MODE_BREATH,    //\u547c\u5438\u706f\n                LED_MODE_FLASHING,  //\u95ea\u70c1\n\n                LED_MODE_INVALID,\n            } lisa_led_mode_e;\n")),Object(a.b)("p",null,"\u200b\t\t\t\t\t\t"),Object(a.b)("p",null,"\u200b\trgb\t\t\t\t \u663e\u793a\u989c\u8272\tRGB_BLUE/RGB_GREEN/RGB_RED"),Object(a.b)("p",null,"\u200b\tflash_cnt\t\t\u95ea\u70c1\u6b21\u6570\uff08\u95ea\u70c1\u6a21\u5f0f\u4e0b\u6709\u6548\uff09"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u6309\u53c2\u6570\u8fdb\u884c\u706f\u6548\u663e\u793a"),Object(a.b)("h4",{id:"23-\u4f7f\u7528\u793a\u4f8b-1"},"2.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'static int\nlisa_led(int argc, char *argv[])\n{\n    lisa_led_mode_e mode;\n    uint32_t rgb;\n    uint16_t cnt = 0;\n\n    if (argc < 2) {\n        LISA_LOGE(TAG, "usage: %s breath|on|off|flash RGB cnt\\r\\n", argv[0]);\n        return 0;\n    }\n\n    lisa_led_init();\n\n    if (strcmp(argv[1], "breath") == 0) {\n        rgb = atoi(argv[2]);\n        mode = LED_MODE_BREATH;\n        LISA_LOGE(TAG, "breath  0x%x\\r\\n", rgb);\n\n    } else if (strcmp(argv[1], "on") == 0) {\n        rgb = atoi(argv[2]);\n        mode = LED_MODE_ON;\n        LISA_LOGE(TAG, "on  0x%x\\r\\n", rgb);\n    } else if (strcmp(argv[1], "off") == 0) {\n        rgb = atoi(argv[2]);\n        mode = LED_MODE_OFF;\n        LISA_LOGE(TAG, "off  0x%x\\r\\n", rgb);\n    } else if (strcmp(argv[1], "flash") == 0) {\n        rgb = atoi(argv[2]);\n        cnt = atoi(argv[3]);\n        mode = LED_MODE_FLASHING;\n        LISA_LOGE(TAG, "flash  0x%x %d\\r\\n", rgb, cnt);\n    }\n\n    switch (rgb) {\n        case 0:\n            lisa_rgbled_ctr(mode, 0, cnt);\n            break;\n        case 1:\n            lisa_rgbled_ctr(mode, RGB_BLUE, cnt);\n            break;\n        case 2:\n            lisa_rgbled_ctr(mode, RGB_GREEN, cnt);\n            break;\n        case 3:\n            lisa_rgbled_ctr(mode, RGB_GREEN | RGB_BLUE, cnt);\n            break;\n        case 4:\n            lisa_rgbled_ctr(mode, RGB_RED, cnt);\n            break;\n        case 5:\n            lisa_rgbled_ctr(mode, RGB_RED | RGB_BLUE, cnt);\n            break;\n        case 6:\n            lisa_rgbled_ctr(mode, RGB_RED | RGB_GREEN, cnt);\n            break;\n        case 7:\n            lisa_rgbled_ctr(mode, RGB_RED | RGB_GREEN | RGB_BLUE, cnt);\n            break;\n        default:\n            break;\n    }\n\n    return 0;\n}\n\nMSH_CMD_EXPORT(lisa_led, led testself);\n')),Object(a.b)("h3",{id:"3-\u6301\u4e45\u5316"},"3 \u6301\u4e45\u5316"),Object(a.b)("h4",{id:"31-\u7b80\u4ecb-1"},"3.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u6301\u4e45\u5316\u4f9d\u8d56\u4e8e FLASH \u6a21\u5757\uff0c\u4e3b\u8981\u7528\u4e8e\u4fdd\u5b58\u8bbe\u5907\u7684 deviceID \u548c\u7528\u6237\u7684\u8bbe\u7f6e\u4fe1\u606f\u3002 \u5efa\u8bae\u79fb\u690d EasyFlash \u5e93\uff0c\u8be5\n\u5e93\u53ef\u63d0\u4f9b key-value \u6301\u4e45\u5316\u63a5\u53e3\u3002\u4e14\u9ed8\u8ba4\u5f00\u542f\u5747\u8861\u78e8\u635f\u548c\u6389\u7535\u4fdd\u62a4\u3002"),Object(a.b)("h4",{id:"32-\u63a5\u53e3\u8bf4\u660e-1"},"3.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_init()\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   void"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u6301\u4e45\u5316\u529f\u80fd\u521d\u59cb\u5316"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_put_string(const char *k, const char *v)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   k\t\t\t\tkey\u503c"),Object(a.b)("p",null,"   v\t\t\t\tvalue"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u4fdd\u5b58\u5b57\u7b26\u578b\u578bkey-value"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_get_string(const char *k, char **v)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   k\t\t\t\tkey\u503c"),Object(a.b)("p",null,"   v\t\t\t\tvalue"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u83b7\u53d6\u5b57\u7b26\u578b\u578bkey-value"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_put_int(const char *k, int v)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   k\t\t\t\tkey\u503c"),Object(a.b)("p",null,"   v\t\t\t\tvalue"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u4fdd\u5b58int\u578bkey-value"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_get_int(const char *k, int *out_v)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   k\t\t\t\tkey\u503c"),Object(a.b)("p",null,"   v\t\t\t\tvalue"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u83b7\u53d6int\u578bkey-value"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_put_bool(const char *k, bool v)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   k\t\t\t\tkey\u503c"),Object(a.b)("p",null,"   v\t\t\t\tvalue"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u4fdd\u5b58bool\u578bkey-value"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_get_bool(const char *k, bool *out_v)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   k\t\t\t\tkey\u503c"),Object(a.b)("p",null,"   v\t\t\t\tvalue"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u83b7\u53d6 bool \u578b key-value"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_delete(const char *k)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   k\t\t\t\tkey\u503c"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u4ece\u6570\u636e\u4e2d\u5220\u9664\u5bf9\u5e94key-value"),Object(a.b)("p",null,"\u200b\t"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_err_t lisa_perst_clear(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   void"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de\tLISA_OK;\t\u5931\u8d25\u8fd4\u56de\tLISA_FAIL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u6e05\u9664\u4e3a\u9ed8\u8ba4\u72b6\u6001"),Object(a.b)("h4",{id:"33-\u4f7f\u7528\u793a\u4f8b-1"},"3.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'static int\nlisa_perst(int argc, char *argv[])\n{\n    int8_t useok = 0;\n    if (argc < 2) {\n        LISA_LOGE(TAG, "usage: %s set|get|del|clr|info string|int|bool key value \\r\\n", argv[0]);\n        return 0;\n    }\n\n    if (strcmp(argv[1], "set") == 0) {\n        if (strcmp(argv[2], "string") == 0) {\n            char *key = NULL;\n            char *value = NULL;\n            key = argv[3];\n            value = argv[4];\n            LISA_LOGE(TAG, "set string %s %s \\r\\n", key, value);\n\n            lisa_perst_init();\n            lisa_perst_put_string(key, value);\n\n            useok = 1;\n\n        } else if (strcmp(argv[2], "int") == 0) {\n            char *key = NULL;\n            int value;\n            key = argv[3];\n            value = atoi(argv[4]);\n            LISA_LOGE(TAG, "set int %s %d \\r\\n", key, value);\n\n            lisa_perst_init();\n            lisa_perst_put_int(key, value);\n\n            useok = 1;\n        } else if (strcmp(argv[2], "bool") == 0) {\n            char *key = NULL;\n            bool value;\n            key = argv[3];\n            value = atoi(argv[4]);\n            LISA_LOGE(TAG, "set bool %s %d \\r\\n", key, value);\n\n            lisa_perst_init();\n            lisa_perst_put_bool(key, value);\n\n            useok = 1;\n        }\n    } else if (strcmp(argv[1], "get") == 0) {\n        if (strcmp(argv[2], "string") == 0) {\n            char *key = NULL;\n            char *value = NULL;\n            key = argv[3];\n\n            lisa_perst_init();\n            lisa_perst_get_string(key, &value);\n\n            LISA_LOGE(TAG, "get string %s %s \\r\\n", key, value);\n\n            useok = 1;\n\n        } else if (strcmp(argv[2], "int") == 0) {\n            char *key = NULL;\n            int value;\n            key = argv[3];\n\n            lisa_perst_init();\n            lisa_perst_get_int(key, &value);\n\n            LISA_LOGE(TAG, "get int %s %d \\r\\n", key, value);\n\n            useok = 1;\n        } else if (strcmp(argv[2], "bool") == 0) {\n            char *key = NULL;\n            bool value;\n            key = argv[3];\n\n            lisa_perst_init();\n            lisa_perst_get_bool(key, &value);\n\n            LISA_LOGE(TAG, "get bool %s %d \\r\\n", key, value);\n\n            useok = 1;\n        }\n    } else if (strcmp(argv[1], "del") == 0) {\n        char *key = NULL;\n        char *value = NULL;\n        key = argv[3];\n        value = argv[4];\n\n        lisa_perst_init();\n        lisa_perst_delete(key);\n\n        LISA_LOGE(TAG, "del string %s\\r\\n", key);\n\n        useok = 1;\n    } else if (strcmp(argv[1], "clr") == 0) {\n        lisa_perst_init();\n\n        lisa_perst_clear();\n\n    } else if (strcmp(argv[1], "info") == 0) {\n        lisa_perst_init();\n        ef_print_env();\n    }\n\n    if (!useok) {\n        LISA_LOGE(TAG, "usage: %s set|get|del string|int|bool key value \\r\\n", argv[0]);\n    }\n}\n\nMSH_CMD_EXPORT(lisa_perst, persistence testself);\n')),Object(a.b)("h3",{id:"4-\u7535\u6e90\u6a21\u5757"},"4. \u7535\u6e90\u6a21\u5757"),Object(a.b)("h4",{id:"41-\u7b80\u4ecb"},"4.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u91cd\u542f\u7535\u6e90"),Object(a.b)("h4",{id:"42-\u63a5\u53e3\u8bf4\u660e"},"4.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"void lisa_reboot(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   void"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\tvoid"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u91cd\u542f\u8bbe\u5907"),Object(a.b)("h3",{id:"5-\u5f02\u5e38\u8ddf\u8e2a"},"5 \u5f02\u5e38\u8ddf\u8e2a"),Object(a.b)("h4",{id:"51-\u7b80\u4ecb"},"5.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u7528\u4e8e\u4fdd\u5b58\u5f02\u5e38\u65f6\u73af\u5883\uff0clog \u8f93\u51fa\u76f8\u5173\u4fe1\u606f\u3002\u5f02\u5e38\u7c7b\u578b\u5982\u4e0b\uff1a"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"    #define LISA_EXCEPTION_TYPE_DABT (1)            //data abort\n    #define LISA_EXCEPTION_TYPE_PABT (2)            //prefech abort\n    #define LISA_EXCEPTION_TYPE_UDEF (3)            //\u672a\u5b9a\u4e49\u6307\u4ee4\n    #define LISA_EXCEPTION_TYPE_ASSERT (9)\n")),Object(a.b)("h4",{id:"52-\u63a5\u53e3\u8bf4\u660e"},"5.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"uint8_t exception_get(void)\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   void"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u83b7\u53d6\u4e0a\u6b21\u91cd\u542f\u539f\u56e0\uff0c\u89c1\u7b80\u4ecb\u5f02\u5e38\u7c7b\u578b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u5f00\u673a\u65f6\u83b7\u53d6\u4e0a\u6b21\u91cd\u542f\u539f\u56e0"),Object(a.b)("h4",{id:"53-\u4f7f\u7528\u793a\u4f8b"},"5.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("p",null,"\u4e0b\u9762\u662f\u67d0\u6b21\u5f02\u5e38\u7684\u65e5\u5fd7\u8f93\u51fa\uff0c\u76f8\u5173\u4fe1\u606f\u5206\u6790"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"[E][APP]../../../project/listenai_[os E] vApplicationStackOverflowHook():145, task 0x22cb10(record_task) stack over flow\nuse default flash chip mJedec 0x0\n[FD I]: mode: 0x4, freq: 48000000Hz, drv: 0\nPMA: mode select:e\n")),Object(a.b)("h3",{id:"6-http\u6a21\u5757"},"6 Http\u6a21\u5757"),Object(a.b)("h4",{id:"61-\u7b80\u4ecb"},"6.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u5b9e\u73b0 https/http \u6a21\u5757\u7684\u7edf\u4e00\u5c01\u88c5\uff0c\u63d0\u4f9b http \u901a\u4fe1\u6240\u9700\u7684\u901a\u7528\u63a5\u53e3"),Object(a.b)("h4",{id:"62-\u63a5\u53e3\u8bf4\u660e"},"6.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_http_t *lisa_http_init(lisa_http_request_t *req);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   req    http\u914d\u7f6e\u53c2\u6570"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),"typedef enum {\n    LISA_HTTP_GET,\n    LISA_HTTP_POST,\n    LISA_HTTP_PUT,\n    LISA_HTTP_PATCH,\n    LISA_HTTP_DELETE,\n} lisa_http_method_e;       // http \u8bf7\u6c42\u7c7b\u578b\n\ntypedef struct {\n    const void *buf;        // \u4f20\u5165\u7684\u6570\u636e\n    int32_t len;            // buf\u7684\u6570\u636e\u957f\u5ea6\n    void *user;             // \u7528\u6237\u81ea\u5b9a\u4e49\u7c7b\u578b\n} lisa_http_data_t;         // http\u56de\u8c03\u51fd\u6570\u7684\u5165\u53c2\u7c7b\u578b\n\ntypedef struct {\n    lisa_http_event_e what;     // \u4e8b\u4ef6\u7c7b\u578b\n    lisa_http_error_e error;    // \u9519\u8bef\u503c\n    const char *header;         //http\u7684header\n    uint16_t status_code;       // http\u7684code\u503c\n} lisa_http_event_t;\n\ntypedef struct {\n    lisa_http_method_e method;      // \u8bf7\u6c42\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301post\u548cget\n    const char *url;\n    const char *headers;        \n    void *body;\n    int32_t body_len;  // \u4e0d\u5b9a\u957f\u5ea6\u4f20 -1\n    uint32_t timeout_ms;            // \u7b49\u5f85\u5ef6\u65f6\uff08\u9ed8\u8ba410ms\uff0c\u6682\u4e0d\u652f\u6301\u4fee\u6539\uff09\n    void *user;                     // \u56de\u8c03\u51fd\u6570\u9700\u4f20\u56de\u7684\u6570\u636e\n    void (*on_event)(lisa_http_event_t *event);  // \u6ce8\u518chttp\u4e8b\u4ef6\u901a\u77e5\u65f6\u7684\u56de\u8c03\n    void (*on_data)(lisa_http_data_t *data);     // \u6ce8\u518chttp\u6709\u6570\u636e\u6536\u5230\u65f6\u7684\u56de\u8c03\u51fd\u6570\n} lisa_http_request_t;\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\u6210\u529f\u8fd4\u56de http \u5b9e\u4f8b\uff1b\u5931\u8d25\u8fd4\u56de NULL"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\u7528\u4e8e\u521b\u5efa http \u5b9e\u4f8b\uff0c\u6ce8\u518c\u5bf9\u5e94 http \u610f\u5916\u4e8b\u4ef6\u548c\u63a5\u6536\u5230\u6570\u636e\u7684\u56de\u8c03\u51fd\u6570\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_http_err_e lisa_http_perform(lisa_http_t *ins);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\thttp \u5b9e\u4f8b "),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"typedef enum {\n  LISA_HTTP_OK = 0,         // http\u8bf7\u6c42\u6267\u884c\u6210\u529f\n  LISA_HTTP_COMMON_ERR,     // \n  LISA_HTTP_PARAM_ERROR,    // \u53c2\u6570\u9519\u8bef\n} lisa_http_err_e;\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\thttp \u7684\u8bf7\u6c42\uff0c\u76ee\u524d\u5b9e\u73b0 get \u548c post \u8bf7\u6c42\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_http_err_e lisa_http_cleanup(lisa_http_t *ins);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"   ins\t\thttp\u5b9e\u4f8b"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"typedef enum {\n  LISA_HTTP_OK = 0,         // http\u8bf7\u6c42\u6267\u884c\u6210\u529f\n  LISA_HTTP_COMMON_ERR,     // \n  LISA_HTTP_PARAM_ERROR,    // \u53c2\u6570\u9519\u8bef\n} lisa_http_err_e;\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"\u5220\u9664http\u5b9e\u4f8b\uff0c\u5e76\u6e05\u7406\u5185\u90e8\u5f00\u9500\u3002\n")),Object(a.b)("h4",{id:"63--\u4f7f\u7528\u793a\u4f8b"},"6.3  \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("p",null,"\u200b\t\t\u914d\u7f6e http \u8bf7\u6c42\u53c2\u6570\uff1a>> lisa_http_test  init   ",Object(a.b)("a",Object(b.a)({parentName:"p"},{href:"http://www.rt-thread.com/service/echo"}),"http://www.rt-thread.com/service/echo"),"  RT-Thread is an open source IoT operating system from China!"),Object(a.b)("p",null,"\u200b\t\t\u542f\u52a8 http \u53d1\u9001\u8bf7\u6c42\uff1a>>lisa_http_test  perform    "),Object(a.b)("p",null,"\u200b\t\t\u5220\u9664 http \u914d\u7f6e\u5e76\u5173\u95ed http \u7aef\u53e3\uff1a>>lisa_http_test  cancel"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'#define HEADERS "Content-Type: application/octet-stream\\r\\n"\n\nlisa_http_t *test_http = NULL;\n\nvoid\nget_http_data_cb(lisa_http_data_t *data)\n{\n    rt_kprintf("get_auth_data_cb ");\n    if (data->buf) {\n        rt_kprintf("%s", (char *)data->buf);\n        rt_kprintf("\\n");\n    }\n    if (data->user) {\n        rt_kprintf("%p", (char *)data->user);\n    }\n}\nint\nlisa_http_test(int argc, char **argv)\n{\n    lisa_http_request_t http_param;\n\n    if (rt_strcmp(argv[1], "init") == 0) {\n        strcpy(http_param.url, argv[2]);\n        strcpy(http_param.body, argv[3]);\n        strcpy(http_param.headers, HEADERS);\n        http_param.body_len = strlen(argv[3]);\n        http_param.method = LISA_HTTP_POST;\n        http_param.timeout_ms = 10;\n        http_param.on_data = get_http_data_cb;\n        http_param.on_event = NULL;\n        http_param.user = NULL;\n        test_http = lisa_http_init(&http_param);\n    } else if (rt_strcmp(argv[1], "cancel") == 0) {\n        lisa_http_cleanup(test_http);\n    }\n    if (rt_strcmp(argv[1], "perform") == 0) {\n        lisa_http_perform(test_http);\n    } else {\n        rt_kprintf("params error\\n");\n    }\n    return RT_EOK;\n}\n\nMSH_CMD_EXPORT(lisa_http_test, lisa_http_test testself);\n\n')),Object(a.b)("h3",{id:"7-websocket"},"7. Websocket"),Object(a.b)("h4",{id:"71-\u7b80\u4ecb"},"7.1 \u7b80\u4ecb"),Object(a.b)("p",null,"\u200b\t\t\u5b9e\u73b0 Websocket\u901a\u8baf\u7684 api \u63a5\u53e3\u5c01\u88c5,\u7528\u4e8e LISA \u7cfb\u7edf\u4e0e\u4e91\u7aef\u7684\u901a\u4fe1\u4ea4\u4e92\u3002"),Object(a.b)("h4",{id:"72-\u63a5\u53e3\u8bf4\u660e"},"7.2 \u63a5\u53e3\u8bf4\u660e"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_ws_t *lisa_ws_init(lisa_ws_request_t *req);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")," "),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'typedef enum {\n  LISA_WS_OK = 0,\n  LISA_WS_COMMON_ERR,\n} lisa_ws_err_e;\n\ntypedef enum {\n  LISA_WS_ON_ERROR,\n  LISA_WS_ON_HEADER,          // \u591a\u6b21\u53d1\u751f\n  LISA_WS_ON_CONNECTED,       // \u8fde\u63a5\u6210\u529f\n  LISA_WS_ON_DISCONNECTED,    // \u65ad\u5f00\u8fde\u63a5\n} lisa_ws_event_e;\n\ntypedef struct {\n  lisa_ws_event_e what;     // websocket \u4e8b\u4ef6\u7c7b\u578b\n  const char *header;       // websocket\u7ed3\u6784\u4e2d\u7684header\u5c5e\u6027\n  void *user;\n} lisa_ws_event_t;\n\ntypedef enum {\n  LISA_WS_TEXT,             // text\u6587\u672c\u6587\u4ef6\n  LISA_WS_BIN,              // \u4e8c\u8fdb\u5236\u6570\u636e\uff08\u4e3b\u8981\u7528\u4e8e\u8bed\u97f3\u4f20\u8f93\u548c\u56fa\u4ef6\u4f20\u8f93\uff09\n} lisa_ws_data_type_e;\n\ntypedef struct {\n  lisa_ws_data_type_e type;                 \n  const void *buf;                          // \u6536\u5230\u7684\u6570\u636e\n  uint32_t len;                             // \u6536\u5230\u7684\u6570\u636e\u957f\u5ea6\uff0c\u6700\u957f\u4e3a2048\n  void *user;                               // \u7528\u6237\u5e26\u5165\u7684\u53c2\u6570\n} lisa_ws_data_t;\n\ntypedef struct {\n  char *scheme;                              // "ws" "wss"\n  char *host;                                // ws\u65f6\uff0c\u4e3a80\uff0cwss\u65f6\u4e3a443\n  char *path;                                // \n  uint32_t timeout_ms;                       // \u6570\u636e\u7b49\u5f85\u8d85\u65f6,\u6682\u4e0d\u652f\u6301\u66f4\u6539\uff08\u5355\u4f4d\uff1a ms\uff09\n  void *user;                                // \u7528\u6237\u643a\u5e26\u7684\u4f20\u5165\u5230\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\n  void (*on_event)(lisa_ws_event_t *event);  // \u72b6\u6001\u53d8\u5316\u65f6\u7684\u72b6\u6001\u4e8b\u4ef6\u56de\u8c03  \n  void (*on_data)(lisa_ws_data_t *data);     // \u6536\u5230\u6570\u636e\u65f6\u7684\u56de\u8c03\u51fd\u6570\n} lisa_ws_request_t;\n')),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\twebsocket \u5b9e\u4f53\u53e5\u67c4"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'typedef struct {\n    char scheme[16];     // "ws" "wss"\n    char host[512];      //  web\u7684host\n    char path[512];      //  web\u7684path\n    uint16_t port;       //  websocket\u8fde\u63a5\u7684\u7aef\u53e3\u53f7\n} url_info_t;\n\ntypedef struct {\n    url_info_t u_info;      // \u8fdc\u7aefurl\u6570\u636e\n    rws_socket *socket;     // rws\u5e93\u5bf9\u5e94\u7684\u7684socket\u7ed3\u6784\u4f53                        \n    uint32_t timeout_ms;    //  \u6570\u636e\u56de\u5e94\u8d85\u65f6\u503c\uff08ms\uff09\n    void *user;             // \u643a\u5e26\u7684\u539f\u59cb\u7528\u6237\u6570\u636e                        \n    void (*inter_on_event)(lisa_ws_event_t *event);     // \u6536\u5230\u6570\u636e\u662f\u7528\u6237\u56de\u8c03\u51fd\u6570\n    void (*inter_on_data)(lisa_ws_data_t *data);        // \u4e8b\u4ef6\u901a\u77e5\u7684\u56de\u8c03\u51fd\u6570\n} lisa_ws_t;\n')),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\t\u6ce8\u518c Websocekt \u5b9e\u4f8b\uff0c\u6210\u529f\u540e\uff0c\u8be5 Websocket \u63a5\u53e3\u6536\u5230\u7684\u6570\u636e\u4f1a\u901a\u8fc7\u8c03\u7528\u7528\u6237\u6ce8\u518c\u51fd\u6570 on_data()\uff0c\u6536\u5230\u7684\u7f51\u7edc\u6570\u636e\u5c06\u4f5c\u4e3a on_data \u7684\u53c2\u6570 lisa_ws_data_t\u4e2d\u7684 buf \u4f20\u5165\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_ws_err_e lisa_ws_connect(lisa_ws_t *ins);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\t\twebsocket \u5b9e\u4f53"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\t\u6210\u529f\u8fd4\u56de\uff1aLISA_WS_OK\uff1b    \u5931\u8d25\u8fd4\u56de\uff1aLISA_WS_COMMON_ERR"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\t\u5c06\u914d\u7f6e\u597d\u7684websocket\u5b9e\u4f53\u4e0e\u670d\u52a1\u7aef\u5efa\u7acb\u8fde\u63a5\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_ws_err_e lisa_ws_disconnect(lisa_ws_t *ins);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\t\twebsocket\u5b9e\u4f53"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\t\u6210\u529f\u8fd4\u56de\uff1aLISA_WS_OK\uff1b    \u5931\u8d25\u8fd4\u56de\uff1aLISA_WS_COMMON_ERR"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\t\u5c06\u914d\u7f6e\u597d\u7684websocket\u5b9e\u4f53\u4e0e\u670d\u52a1\u7aef\u65ad\u5f00\u8fde\u63a5\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_ws_err_e lisa_ws_send_text(lisa_ws_t *ins, const char *text);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\t\tins\uff1a  websocket\u5b9e\u4f53"),Object(a.b)("p",null,"\u200b\t\ttext\uff1a \u53d1\u9001\u7684\u5b57\u7b26\u4e32 "),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\t\u6210\u529f\u8fd4\u56de\uff1aLISA_WS_OK\uff1b    \u5931\u8d25\u8fd4\u56de\uff1aLISA_WS_COMMON_ERR"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\t \u5411ins\u5b9e\u4f53\u53d1\u9001 tex t\u5b57\u7b26\u4e32"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_ws_err_e lisa_ws_send_binary(lisa_ws_t *ins, const void *buf, uint32_t len); \n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\t\tins\uff1a  websocket\u5b9e\u4f53"),Object(a.b)("p",null,"\u200b\t\tbuf\uff1a \u53d1\u9001\u7684\u4e8c\u8fdb\u5236\u6570\u636e"),Object(a.b)("p",null,"\u200b\t\tlen:   \u6570\u636e\u957f\u5ea6"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\t\u6210\u529f\u8fd4\u56de\uff1aLISA_WS_OK\uff1b    \u5931\u8d25\u8fd4\u56de\uff1aLISA_WS_COMMON_ERR"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("p",null,"\u200b\t\t \u53d1\u9001 len \u957f\u5ea6\u7684\u6570\u636e buf"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u63a5\u53e3")),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{}),"lisa_ws_err_e lisa_ws_cleanup(lisa_ws_t *ins);\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u53c2\u6570")),Object(a.b)("p",null,"\u200b\t\twebsocket \u5b9e\u4f53"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(a.b)("p",null,"\u200b\t\t\u6210\u529f\u8fd4\u56de\uff1aLISA_WS_OK\uff1b    \u5931\u8d25\u8fd4\u56de\uff1aLISA_WS_COMMON_ERR"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u8bf4\u660e")),Object(a.b)("h4",{id:"73-\u4f7f\u7528\u793a\u4f8b"},"7.3 \u4f7f\u7528\u793a\u4f8b"),Object(a.b)("p",null,"\u200b\t\t\u6ce8\u518c\u5e76\u914d\u7f6e websocket \u5b9e\u4f8b\uff1a>> lisa_rws_test  init   wss  echo.websocket.org    /  "),Object(a.b)("p",null,"\u200b\t\t\u8fde\u63a5\u5230\u914d\u7f6e\u597d\u7684 websocket \u5b9e\u4f8b\uff1a>>lisa_rws_test   conn"),Object(a.b)("p",null,"\u200b\t\t\u901a\u8fc7 websocket \u53d1\u9001\u6587\u672c\u6570\u636e\uff1a>>lisa_rws_test  test   hello,listenAI"),Object(a.b)("p",null,"\u200b        \u901a\u8fc7 websocket \u53d1\u9001\u4e8c\u8fdb\u5236\u6570\u636e\uff1a>>lisa_rws_test   bin"),Object(a.b)("p",null,"\u200b\t\t\u65ad\u5f00 websocket \u8fde\u63a5\uff1a>>lisa_rws_test   disc"),Object(a.b)("p",null,"\u200b\t\t\u5220\u9664 websocket \u914d\u7f6e\u5e76\u5173\u95ed websocket \u7aef\u53e3\uff1a>>lisa_rws_test   clean"),Object(a.b)("pre",null,Object(a.b)("code",Object(b.a)({parentName:"pre"},{className:"language-c"}),'void\ntest_ws_data_cb(lisa_ws_data_t *data)\n{\n    WS_DBG(TAG, "test_ws_data_cb.");\n    if (data->buf) {\n        rt_kprintf("%s", (char *)data->buf);\n        rt_kprintf("\\n");\n    }\n    if (data->type == LISA_WS_TEXT) {\n        WS_DBG(TAG, " LISA_WS_TEXT");\n    } else if (data->type == LISA_WS_BIN) {\n        WS_DBG(TAG, " LISA_WS_BIN");\n    }\n}\n\nuint8_t bin_data[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};\nstatic int\nlisa_rws_test(int argc, char *argv[])\n{\n    lisa_ws_request_t lisa_ws_req;\n    if (rt_strcmp(argv[1], "init") == 0) {\n        if (rt_strcmp(argv[2], "wss") == 0) {\n            lisa_ws_req.scheme = "wss";\n        } else {\n            lisa_ws_req.scheme = "ws";\n        }\n        lisa_ws_req.host = argv[3];\n        lisa_ws_req.path = argv[4];\n        lisa_ws_req.timeout_ms = 0;\n        lisa_ws_req.on_data = test_ws_data_cb;\n        lisa_ws_req.on_event = NULL;\n        lisa_ws_req.user = NULL;\n        lisa_ws = lisa_ws_init(&lisa_ws_req);\n    } else if (rt_strcmp(argv[1], "conn") == 0) {\n        lisa_ws_connect(lisa_ws);\n    } else if (rt_strcmp(argv[1], "disc") == 0) {\n        lisa_ws_disconnect(lisa_ws);\n    } else if (rt_strcmp(argv[1], "clean") == 0) {\n        lisa_ws_cleanup(lisa_ws);\n    } else if (rt_strcmp(argv[1], "text") == 0) {\n        lisa_ws_send_text(lisa_ws, argv[2]);\n    } else if (rt_strcmp(argv[1], "bin") == 0) {\n        lisa_ws_send_binary(lisa_ws, bin_data, sizeof(bin_data));\n    }\n\n    return RT_EOK;\n}\nMSH_CMD_EXPORT(lisa_rws_test, lisa_rws_test text);\n')))}s.isMDXComponent=!0},171:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return u}));var b=n(0),l=n.n(b);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);t&&(b=b.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,b)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,b,l=function(e,t){if(null==e)return{};var n,b,l={},a=Object.keys(e);for(b=0;b<a.length;b++)n=a[b],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(b=0;b<a.length;b++)n=a[b],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var _=l.a.createContext({}),s=function(e){var t=l.a.useContext(_),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},O=function(e){var t=s(e.components);return l.a.createElement(_.Provider,{value:t},e.children)},i={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},j=l.a.forwardRef((function(e,t){var n=e.components,b=e.mdxType,a=e.originalType,c=e.parentName,_=r(e,["components","mdxType","originalType","parentName"]),O=s(n),j=b,u=O["".concat(c,".").concat(j)]||O[j]||i[j]||a;return n?l.a.createElement(u,p(p({ref:t},_),{},{components:n})):l.a.createElement(u,p({ref:t},_))}));function u(e,t){var n=arguments,b=t&&t.mdxType;if("string"==typeof e||b){var a=n.length,c=new Array(a);c[0]=j;var p={};for(var r in t)hasOwnProperty.call(t,r)&&(p[r]=t[r]);p.originalType=e,p.mdxType="string"==typeof e?e:b,c[1]=p;for(var _=2;_<a;_++)c[_]=n[_];return l.a.createElement.apply(null,c)}return l.a.createElement.apply(null,n)}j.displayName="MDXCreateElement"}}]);